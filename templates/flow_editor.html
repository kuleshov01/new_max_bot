<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}?v=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flow.css') }}?v=14">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}?v=1">
</head>
<body>
    <!-- Skip Links –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ -->
    <a href="#main-content" class="skip-link">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>
    <a href="#nodes" class="skip-link">–ü–µ—Ä–µ–π—Ç–∏ –∫ —É–∑–ª–∞–º</a>
    
    <!-- Top Bar (Mobile & Desktop) -->
    <header class="top-bar desktop-header">
        <!-- Header Left (Mobile & Desktop) -->
        <div class="header-left">
            <button class="menu-btn" aria-label="–ú–µ–Ω—é">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
            <span class="app-name">MaxBot Editor</span>
        </div>
        
        <!-- Header Center (Desktop Only) -->
        <div class="header-center">
            <select class="bot-select" id="botSelect">
                <option value="">Bot: –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞</option>
                <!-- Options will be populated dynamically -->
            </select>
            <select class="command-select" id="commandSelect">
                <option value="">–ö–æ–º–∞–Ω–¥–∞: –í—Å–µ</option>
                <!-- Options will be populated dynamically -->
            </select>
        </div>
        
        <!-- Header Right (Desktop Only) -->
        <div class="header-right">
            <button class="action-btn" onclick="window.saveFlow()" aria-label="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">
                üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
            </button>
            <button class="action-btn" onclick="window.exportFlow()" aria-label="–≠–∫—Å–ø–æ—Ä—Ç">
                üì§ –≠–∫—Å–ø–æ—Ä—Ç
            </button>
            <button class="action-btn" onclick="window.importFlow()" aria-label="–ò–º–ø–æ—Ä—Ç">
                üì• –ò–º–ø–æ—Ä—Ç
            </button>
            <button class="icon-btn" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </button>
            <button class="icon-btn" onclick="window.location.href='/'; return false;" aria-label="–ù–∞–∑–∞–¥">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
        </div>
    </header>

    <!-- Bottom Toolbar (Mobile Only) -->
    <nav class="bottom-toolbar">
        <div class="tools-container">
            <button class="tool-btn" data-tool="message" aria-label="–î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ">
                <span class="tool-icon">üìù</span>
            </button>
            <button class="tool-btn" data-tool="api" aria-label="API –∑–∞–ø—Ä–æ—Å">
                <span class="tool-icon">üåê</span>
            </button>
            <button class="tool-btn" data-tool="condition" aria-label="–£—Å–ª–æ–≤–∏–µ">
                <span class="tool-icon">üîÄ</span>
            </button>
            <button class="tool-btn" data-tool="transform" aria-label="–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è">
                <span class="tool-icon">‚öôÔ∏è</span>
            </button>
        </div>
        <div class="view-controls">
            <button class="icon-btn" id="reset-zoom" aria-label="–°–±—Ä–æ—Å–∏—Ç—å –º–∞—Å—à—Ç–∞–±">
                ‚Ü∫
            </button>
            <button class="icon-btn" id="zoom-info" aria-label="–ú–∞—Å—à—Ç–∞–±">
                üîç <span>100%</span>
            </button>
        </div>
    </nav>

    <div id="app" class="canvas-container" role="main" tabindex="-1">
        <aside class="left-sidebar" aria-label="–ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å" role="complementary">
            <!-- Section 1: –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ -->
            <section class="sidebar-section" aria-labelledby="commands-heading">
                <h2 id="commands-heading" class="sr-only">–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞</h2>
                <button class="section-header" data-section="commands" aria-expanded="true" aria-controls="commands-section">
                    <span>‚ñº –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞</span>
                </button>
                <div class="section-content open" id="commands-section" role="region" aria-labelledby="commands-heading">
                    <div class="command-list" id="commandsList">
                        <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–∞–Ω–¥...</p>
                    </div>
                    <button class="add-btn" onclick="window.showCreateCommandModal()" aria-label="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É">+ –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É</button>
                </div>
            </section>
            
            <!-- Section 2: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã -->
            <section class="sidebar-section" aria-labelledby="tools-heading">
                <h2 id="tools-heading" class="sr-only">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h2>
                <button class="section-header" data-section="tools" aria-expanded="true" aria-controls="tools-section">
                    <span>‚ñº –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</span>
                </button>
                <div class="section-content open" id="tools-section" role="region" aria-labelledby="tools-heading">
                    <div class="tool-list">
                        <div class="tool-item" draggable="true" data-tool="message">
                            <span class="tool-icon">üìù</span>
                            <div class="tool-info">
                                <span class="tool-name">–°–æ–æ–±—â–µ–Ω–∏–µ</span>
                                <span class="tool-desc">–ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è</span>
                            </div>
                        </div>
                        <div class="tool-item" draggable="true" data-tool="api">
                            <span class="tool-icon">üåê</span>
                            <div class="tool-info">
                                <span class="tool-name">API –∑–∞–ø—Ä–æ—Å</span>
                                <span class="tool-desc">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å–∞ –∫ –≤–Ω–µ—à–Ω–µ–º—É API</span>
                            </div>
                        </div>
                        <div class="tool-item" draggable="true" data-tool="condition">
                            <span class="tool-icon">üîÄ</span>
                            <div class="tool-info">
                                <span class="tool-name">–£—Å–ª–æ–≤–∏–µ</span>
                                <span class="tool-desc">–†–∞–∑–≤–µ—Ç–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ —É—Å–ª–æ–≤–∏—é</span>
                            </div>
                        </div>
                        <div class="tool-item" draggable="true" data-tool="transform">
                            <span class="tool-icon">‚öôÔ∏è</span>
                            <div class="tool-info">
                                <span class="tool-name">–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è</span>
                                <span class="tool-desc">–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 3: –°–≤–æ–π—Å—Ç–≤–∞ —É–∑–ª–∞ -->
            <section class="sidebar-section" aria-labelledby="properties-heading">
                <h2 id="properties-heading" class="sr-only">–°–≤–æ–π—Å—Ç–≤–∞ —É–∑–ª–∞</h2>
                <button class="section-header" data-section="properties" aria-expanded="true" aria-controls="properties-section">
                    <span>‚ñº –°–≤–æ–π—Å—Ç–≤–∞ —É–∑–ª–∞</span>
                </button>
                <div class="section-content open" id="properties-section" role="region" aria-labelledby="properties-heading">
                    <div id="nodeProperties" role="region" aria-live="polite" aria-atomic="true">
                        <p class="text-muted">–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                    </div>
                </div>
            </section>
        </aside>
        
        <div class="main-content">
            <div id="flowCanvas">
                <svg id="connections"></svg>
                <div id="nodes"></div>
            </div>
            <!-- –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–æ–º -->
            <div class="zoom-controls">
                <button class="zoom-btn" onclick="zoomIn()" title="–£–≤–µ–ª–∏—á–∏—Ç—å">‚ûï</button>
                <span class="zoom-level" id="zoomLevel">100%</span>
                <button class="zoom-btn" onclick="zoomOut()" title="–£–º–µ–Ω—å—à–∏—Ç—å">‚ûñ</button>
                <button class="zoom-btn" onclick="zoomReset()" title="–°–±—Ä–æ—Å–∏—Ç—å">‚Ü∫</button>
            </div>
        </div>
        
        <!-- Mode Toggle (Desktop Only) -->
        <div class="mode-toggle">
            <button class="mode-btn active" data-mode="edit" onclick="setMode('edit')" aria-label="–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            </button>
            <button class="mode-btn" data-mode="connect" onclick="setMode('connect')" aria-label="–†–µ–∂–∏–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è">
                üîó –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
            </button>
            <button class="mode-btn" data-mode="view" onclick="setMode('view')" aria-label="–†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞">
                üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä
            </button>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ Markdown —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
    <div id="markdownEditorModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="markdown-editor-title">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="markdown-editor-title">üìù –†–µ–¥–∞–∫—Ç–æ—Ä Markdown</h3>
                <button class="modal-close" onclick="closeMarkdownEditor()" aria-label="–ó–∞–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä">&times;</button>
            </div>
            <div class="modal-body">
                <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ Markdown -->
                <div class="editor-toolbar" id="markdownToolbar">
                    <button class="toolbar-btn" onclick="insertMarkdown('bold')" title="–ñ–∏—Ä–Ω—ã–π"><b>B</b></button>
                    <button class="toolbar-btn" onclick="insertMarkdown('italic')" title="–ö—É—Ä—Å–∏–≤"><i>I</i></button>
                    <button class="toolbar-btn" onclick="insertMarkdown('strikethrough')" title="–ó–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π"><s>S</s></button>
                    <div class="toolbar-divider"></div>
                    <button class="toolbar-btn" onclick="insertMarkdown('code')" title="–ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π">&lt;/&gt;</button>
                    <button class="toolbar-btn" onclick="insertMarkdown('link')" title="–°—Å—ã–ª–∫–∞">üîó</button>
                    <div class="toolbar-divider"></div>
                    <button class="toolbar-btn" onclick="insertMarkdown('ul')" title="–ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫">‚Ä¢</button>
                    <button class="toolbar-btn" onclick="insertMarkdown('ol')" title="–ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫">1.</button>
                </div>
                
                <!-- –†–µ–¥–∞–∫—Ç–æ—Ä Markdown -->
                <textarea id="markdownEditorContent" class="editor-code" placeholder="–í–≤–µ–¥–∏—Ç–µ Markdown –∑–¥–µ—Å—å..." maxlength="4000"></textarea>
                
                <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
                <div class="markdown-preview-wrapper">
                    <div class="preview-header">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</div>
                    <div id="markdownPreview" class="markdown-preview"></div>
                </div>
                
                <!-- –°–ø—Ä–∞–≤–∫–∞ –ø–æ Markdown -->
                <div class="markdown-help">
                    <details>
                        <summary>üìñ –°–ø—Ä–∞–≤–∫–∞ –ø–æ Markdown</summary>
                        <div class="help-content">
                            <p><b>–ñ–∏—Ä–Ω—ã–π:</b> <code>**—Ç–µ–∫—Å—Ç**</code> –∏–ª–∏ <code>__—Ç–µ–∫—Å—Ç__</code></p>
                            <p><i>–ö—É—Ä—Å–∏–≤:</i> <code>*—Ç–µ–∫—Å—Ç*</code> –∏–ª–∏ <code>_—Ç–µ–∫—Å—Ç_</code></p>
                            <p><s>–ó–∞—á—ë—Ä–∫–Ω—É—Ç—ã–π:</s> <code>~~—Ç–µ–∫—Å—Ç~~</code></p>
                            <p><code>–ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π:</code> <code>`–∫–æ–¥`</code></p>
                            <p>üîó –°—Å—ã–ª–∫–∞: <code>[—Ç–µ–∫—Å—Ç](URL)</code></p>
                            <p>@—É–ø–æ–º–∏–Ω–∞–Ω–∏–µ: <code>"text": "[–ò–º—è –§–∞–º–∏–ª–∏—è](max://user/user_id)"</code></p>
                        </div>
                    </details>
                </div>
                
                <!-- –°—á—ë—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ -->
                <div class="editor-char-counter">
                    <span id="charCount">0</span> / 4000 —Å–∏–º–≤–æ–ª–æ–≤
                    <span id="charLimitWarning" class="char-warning" style="display: none;">‚ö†Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç!</span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-action" onclick="saveMarkdownEditor()">‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn btn-mode" onclick="closeMarkdownEditor()">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –¥–ª—è —Å–≤—è–∑–µ–π -->
    <div id="connectionContextMenu" class="context-menu" style="display: none;">
        <div class="context-menu-item" onclick="deleteSelectedConnection()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å —Å–≤—è–∑—å</div>
        <div class="context-menu-item" onclick="addControlPoint()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ–ø–æ—Ä–Ω—É—é —Ç–æ—á–∫—É</div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –¥–ª—è —É–∑–ª–æ–≤ -->
    <div id="nodeContextMenu" class="context-menu" style="display: none;">
        <button class="menu-item" data-action="edit">
            ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å
        </button>
        <button class="menu-item" data-action="duplicate">
            üìã –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <button class="menu-item" data-action="delete">
            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
        </button>
        <div class="menu-divider"></div>
        <button class="menu-item" data-action="connect">
            üîó –°–æ–µ–¥–∏–Ω–∏—Ç—å —Å...
        </button>
        <button class="menu-item" data-action="center">
            üìê –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <button class="menu-item" data-action="focus">
            üîç –§–æ–∫—É—Å –Ω–∞ —É–∑–ª–µ
        </button>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã -->
    <div id="commandModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="command-modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="command-modal-title">üìù –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞</h3>
                <button class="modal-close" onclick="closeCommandModal()" aria-label="–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –∫–æ–º–∞–Ω–¥—ã">&times;</button>
            </div>
            <div class="modal-body">
                <div class="property-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã:</label>
                    <input type="text" id="commandName" placeholder="/help" maxlength="50">
                    <small class="text-muted">–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å / (–Ω–∞–ø—Ä–∏–º–µ—Ä, /help, /info)</small>
                </div>
                <div class="property-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                    <textarea id="commandDescription" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã..."></textarea>
                </div>
                <div class="property-group">
                    <label>
                        <input type="checkbox" id="commandEnabled" checked>
                        –í–∫–ª—é—á–µ–Ω–∞
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-action" onclick="saveCommandModal()">‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn btn-mode" onclick="closeCommandModal()">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Left Bottom Sheet (Commands) -->
    <div class="bottom-sheet" id="commands-sheet">
        <div class="sheet-header">
            <h2>–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞</h2>
            <button class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        </div>
        <div class="sheet-content">
            <div class="command-list">
                <!-- –ö–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <button class="add-command-btn">+ –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É</button>
        </div>
    </div>

    <!-- Right Bottom Sheet (Node Properties) -->
    <div class="bottom-sheet" id="properties-sheet">
        <div class="sheet-header">
            <h2>–°–≤–æ–π—Å—Ç–≤–∞: <span class="node-type">–°–æ–æ–±—â–µ–Ω–∏–µ</span></h2>
            <button class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        </div>
        <div class="sheet-content">
            <form id="node-properties-form">
                <!-- –ü–æ–ª—è —Ñ–æ—Ä–º—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </form>
            <button type="submit" class="apply-btn">‚úì –ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        </div>
    </div>

    <script>
        // Set the base URL for API calls
        window.API_BASE_URL = '{{ base_url }}';
        // Set the bot ID from URL parameter
        window.BOT_ID = {{ bot_id }};
    </script>
    <script src="{{ url_for('static', filename='js/flow.js') }}?v=27"></script>
</body>
</html>